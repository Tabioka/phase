---
import {
  Breadcrumb,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbList,
  BreadcrumbSeparator,
} from "@repo/ui/breadcrumb"
import { Link } from "~/components/react/link"

const pathnameParts = Astro.url.pathname.split("/").filter(Boolean)
---

<Breadcrumb className="mb-4">
  <BreadcrumbList>
    <BreadcrumbLink asChild>
      <Link href={"/"} variant={"no-underline"}>Docs</Link>
    </BreadcrumbLink>
    <BreadcrumbSeparator />
    {
      pathnameParts.map((part, index) => (
        <>
          <BreadcrumbItem>
            <BreadcrumbLink asChild>
              <Link
                href={`/${pathnameParts.slice(0, index + 1).join("/")}`}
                variant={"no-underline"}
                class:list={[
                  index + 1 === pathnameParts.length &&
                    "text-foreground font-medium",
                ]}
              >
                {part
                  .replaceAll("-", " ")
                  .replace(/\b\w/g, (match) => match.toUpperCase())}
              </Link>
            </BreadcrumbLink>
          </BreadcrumbItem>
          {index + 1 !== pathnameParts.length && <BreadcrumbSeparator />}
        </>
      ))
    }
  </BreadcrumbList>
</Breadcrumb>
